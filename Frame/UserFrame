/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package com.shop.Frame;



import com.shop.dao.RoleDao;
import com.shop.dao.UserDao;
import com.shop.daoImpl.RoleDaoImpl;
import com.shop.daoImpl.UserDaoImpl;
import com.shop.model.Role;
import com.shop.model.User;
import java.util.List;
import javax.swing.JOptionPane;
import javax.swing.table.DefaultTableModel;

/**
 *
 * @author Jatendar
 */
public class UserFrame extends javax.swing.JFrame {

    /**
     * Creates new form StudentClassFrame
     */
    public UserFrame() {
        initComponents();
        fillRollCombo();
        fillUserTable();
    }
    Role roll = new Role();
    RoleDao rollDao = new RoleDaoImpl();
    User user = new User();
    UserDao userDao = new UserDaoImpl();

    public void fillUserTable() {
        Object coObject[] = {"ID", "Role","Username","Password","Email Address","Phone Number","Address"};
        DefaultTableModel model = new DefaultTableModel(coObject,0);
        List<User> list = userDao.viewAllUser();
        for(User user : list)
        {
           roll = rollDao.viewById(user.getRoll().getId());
           Object object[] = {user.getId(),roll.getName(),user.getUserName(),user.getPassword(),user.getEmail(),user.getNumber(),user.getAddress()};
           model.addRow(object);
           studentTable.setModel(model);
        }
    }
    

    public void fillRollCombo() {
        List<Role> list = rollDao.viewAllRecord();
        rollCombo.addItem("--- Select Role ---");
        for (Role b : list) {
            rollCombo.addItem(b.getName());
        }
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">                          
    private void initComponents() {

        jLabel1 = new javax.swing.JLabel();
        jLabel2 = new javax.swing.JLabel();
        jLabel3 = new javax.swing.JLabel();
        jLabel4 = new javax.swing.JLabel();
        rollCombo = new javax.swing.JComboBox<>();
        passwordText = new javax.swing.JTextField();
        jScrollPane1 = new javax.swing.JScrollPane();
        studentTable = new javax.swing.JTable();
        addButton = new javax.swing.JButton();
        UpdateButton = new javax.swing.JButton();
        clearButton = new javax.swing.JButton();
        deleteButton = new javax.swing.JButton();
        usernameText = new javax.swing.JTextField();
        emailText = new javax.swing.JTextField();
        jLabel6 = new javax.swing.JLabel();
        jLabel7 = new javax.swing.JLabel();
        numberText = new javax.swing.JTextField();
        jLabel5 = new javax.swing.JLabel();
        jScrollPane2 = new javax.swing.JScrollPane();
        addressArea = new javax.swing.JTextArea();
        homeButton = new javax.swing.JButton();
        jLabel8 = new javax.swing.JLabel();
        jLabel9 = new javax.swing.JLabel();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        getContentPane().setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        jLabel1.setFont(new java.awt.Font("Tahoma", 1, 24)); // NOI18N
        jLabel1.setForeground(new java.awt.Color(255, 255, 255));
        jLabel1.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jLabel1.setText("User Menu");
        getContentPane().add(jLabel1, new org.netbeans.lib.awtextra.AbsoluteConstraints(340, 20, 187, 39));

        jLabel2.setFont(new java.awt.Font("Tahoma", 1, 14)); // NOI18N
        jLabel2.setText("Roll");
        getContentPane().add(jLabel2, new org.netbeans.lib.awtextra.AbsoluteConstraints(30, 84, 111, 34));

        jLabel3.setFont(new java.awt.Font("Tahoma", 1, 14)); // NOI18N
        jLabel3.setText("Username");
        getContentPane().add(jLabel3, new org.netbeans.lib.awtextra.AbsoluteConstraints(30, 122, 111, 34));

        jLabel4.setFont(new java.awt.Font("Tahoma", 1, 14)); // NOI18N
        jLabel4.setText("Password");
        getContentPane().add(jLabel4, new org.netbeans.lib.awtextra.AbsoluteConstraints(30, 165, 111, 34));

        rollCombo.setFont(new java.awt.Font("Tahoma", 1, 14)); // NOI18N
        rollCombo.setBorder(javax.swing.BorderFactory.createLineBorder(new java.awt.Color(0, 0, 0), 2));
        rollCombo.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                rollComboActionPerformed(evt);
            }
        });
        getContentPane().add(rollCombo, new org.netbeans.lib.awtextra.AbsoluteConstraints(151, 84, 162, 35));

        passwordText.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        passwordText.setBorder(javax.swing.BorderFactory.createLineBorder(new java.awt.Color(0, 0, 0), 2));
        getContentPane().add(passwordText, new org.netbeans.lib.awtextra.AbsoluteConstraints(151, 165, 162, 34));

        studentTable.setBorder(javax.swing.BorderFactory.createLineBorder(new java.awt.Color(51, 255, 0), 2));
        studentTable.setFont(new java.awt.Font("Times New Roman", 1, 14)); // NOI18N
        studentTable.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {
                {null, null, null, null},
                {null, null, null, null},
                {null, null, null, null},
                {null, null, null, null}
            },
            new String [] {
                "Title 1", "Title 2", "Title 3", "Title 4"
            }
        ));
        studentTable.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                studentTableMouseClicked(evt);
            }
        });
        jScrollPane1.setViewportView(studentTable);

        getContentPane().add(jScrollPane1, new org.netbeans.lib.awtextra.AbsoluteConstraints(10, 237, 907, 276));

        addButton.setBackground(new java.awt.Color(204, 204, 204));
        addButton.setFont(new java.awt.Font("Times New Roman", 1, 14)); // NOI18N
        addButton.setText("Add");
        addButton.setBorder(javax.swing.BorderFactory.createLineBorder(new java.awt.Color(0, 255, 0), 2));
        addButton.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                addButtonActionPerformed(evt);
            }
        });
        getContentPane().add(addButton, new org.netbeans.lib.awtextra.AbsoluteConstraints(30, 205, 86, -1));

        UpdateButton.setBackground(new java.awt.Color(204, 204, 204));
        UpdateButton.setFont(new java.awt.Font("Times New Roman", 1, 14)); // NOI18N
        UpdateButton.setText("Update");
        UpdateButton.setBorder(javax.swing.BorderFactory.createLineBorder(new java.awt.Color(51, 255, 0), 2));
        UpdateButton.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                UpdateButtonActionPerformed(evt);
            }
        });
        getContentPane().add(UpdateButton, new org.netbeans.lib.awtextra.AbsoluteConstraints(134, 205, 86, -1));

        clearButton.setBackground(new java.awt.Color(204, 204, 204));
        clearButton.setFont(new java.awt.Font("Times New Roman", 1, 14)); // NOI18N
        clearButton.setText("Clear");
        clearButton.setBorder(javax.swing.BorderFactory.createLineBorder(new java.awt.Color(51, 255, 51), 2));
        clearButton.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                clearButtonActionPerformed(evt);
            }
        });
        getContentPane().add(clearButton, new org.netbeans.lib.awtextra.AbsoluteConstraints(334, 205, 78, -1));

        deleteButton.setBackground(new java.awt.Color(204, 204, 204));
        deleteButton.setFont(new java.awt.Font("Times New Roman", 1, 14)); // NOI18N
        deleteButton.setText("Delete");
        deleteButton.setBorder(javax.swing.BorderFactory.createLineBorder(new java.awt.Color(0, 255, 0), 2));
        deleteButton.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                deleteButtonActionPerformed(evt);
            }
        });
        getContentPane().add(deleteButton, new org.netbeans.lib.awtextra.AbsoluteConstraints(230, 205, 86, -1));

        usernameText.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        usernameText.setBorder(javax.swing.BorderFactory.createLineBorder(new java.awt.Color(0, 0, 0), 2));
        getContentPane().add(usernameText, new org.netbeans.lib.awtextra.AbsoluteConstraints(151, 123, 162, 35));

        emailText.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        emailText.setBorder(javax.swing.BorderFactory.createLineBorder(new java.awt.Color(0, 0, 0), 2));
        getContentPane().add(emailText, new org.netbeans.lib.awtextra.AbsoluteConstraints(460, 85, 162, 35));

        jLabel6.setFont(new java.awt.Font("Tahoma", 1, 14)); // NOI18N
        jLabel6.setText("Phone Number");
        getContentPane().add(jLabel6, new org.netbeans.lib.awtextra.AbsoluteConstraints(331, 122, 111, 34));

        jLabel7.setFont(new java.awt.Font("Tahoma", 1, 14)); // NOI18N
        jLabel7.setText("Email");
        getContentPane().add(jLabel7, new org.netbeans.lib.awtextra.AbsoluteConstraints(331, 84, 111, 34));

        numberText.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        numberText.setBorder(javax.swing.BorderFactory.createLineBorder(new java.awt.Color(0, 0, 0), 2));
        getContentPane().add(numberText, new org.netbeans.lib.awtextra.AbsoluteConstraints(460, 123, 162, 36));

        jLabel5.setFont(new java.awt.Font("Tahoma", 1, 14)); // NOI18N
        jLabel5.setText("Address");
        getContentPane().add(jLabel5, new org.netbeans.lib.awtextra.AbsoluteConstraints(331, 165, 111, 34));

        addressArea.setColumns(20);
        addressArea.setFont(new java.awt.Font("Monospaced", 1, 12)); // NOI18N
        addressArea.setRows(5);
        addressArea.setBorder(javax.swing.BorderFactory.createLineBorder(new java.awt.Color(0, 0, 0), 2));
        jScrollPane2.setViewportView(addressArea);

        getContentPane().add(jScrollPane2, new org.netbeans.lib.awtextra.AbsoluteConstraints(460, 165, 162, 61));

        homeButton.setFont(new java.awt.Font("Times New Roman", 1, 14)); // NOI18N
        homeButton.setText("Home");
        homeButton.setToolTipText("");
        homeButton.setBorder(javax.swing.BorderFactory.createLineBorder(new java.awt.Color(51, 255, 0), 2));
        homeButton.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                homeButtonActionPerformed(evt);
            }
        });
        getContentPane().add(homeButton, new org.netbeans.lib.awtextra.AbsoluteConstraints(801, 14, 116, 36));

        jLabel8.setIcon(new javax.swing.ImageIcon("C:\\Users\\Jatendar\\OneDrive\\Desktop\\MallManagementSystem\\blue background.jpg")); // NOI18N
        getContentPane().add(jLabel8, new org.netbeans.lib.awtextra.AbsoluteConstraints(0, 0, 930, 70));

        jLabel9.setIcon(new javax.swing.ImageIcon("C:\\Users\\Jatendar\\OneDrive\\Desktop\\MallManagementSystem\\dfadf.jpg")); // NOI18N
        getContentPane().add(jLabel9, new org.netbeans.lib.awtextra.AbsoluteConstraints(0, 70, 930, 460));

        pack();
    }// </editor-fold>                        

    private void addButtonActionPerformed(java.awt.event.ActionEvent evt) {                                          
        String batch = rollCombo.getSelectedItem().toString();
        Integer rollId = rollDao.viewByName(batch);

        String username = usernameText.getText();
        String password = passwordText.getText();
        String email = emailText.getText();
        String number = numberText.getText();
        String address = addressArea.getText();
        roll.setId(rollId);
        user.setAddress(address);
        user.setEmail(email);
        user.setNumber(number);
        user.setPassword(password);
        user.setRoll(roll);
        user.setUserName(username);
        Integer number1 = userDao.addUser(user);
        if (number1 > 0) {
            JOptionPane.showMessageDialog(this, "Added Successfully");
            fillUserTable();
        }

    }                                         

    private void studentTableMouseClicked(java.awt.event.MouseEvent evt) {                                          
        Integer id = (Integer) studentTable.getValueAt(studentTable.getSelectedRow(), 0);
        user = userDao.viewById(id);
        usernameText.setText(user.getUserName());
        passwordText.setText(user.getPassword());
        emailText.setText(user.getEmail());
        numberText.setText(user.getNumber());
        addressArea.setText(user.getAddress());
        roll = rollDao.viewById(user.getRoll().getId());
        rollCombo.setSelectedItem(roll.getName());


    }                                         

    private void clearButtonActionPerformed(java.awt.event.ActionEvent evt) {                                            
        rollCombo.setSelectedIndex(0);
        passwordText.setText("");
        usernameText.setText("");
        addressArea.setText("");
        emailText.setText("");
        numberText.setText("");

    }                                           

    private void UpdateButtonActionPerformed(java.awt.event.ActionEvent evt) {                                             
        String batch = rollCombo.getSelectedItem().toString();
        Integer rollId = rollDao.viewByName(batch);

        String username = usernameText.getText();
        String password = passwordText.getText();
        String email = emailText.getText();
        String number = numberText.getText();
        String address = addressArea.getText();
        roll.setId(rollId);
        user.setAddress(address);
        user.setEmail(email);
        user.setNumber(number);
        user.setPassword(password);
        user.setRoll(roll);
        user.setUserName(username);
        int number1 = JOptionPane.showConfirmDialog(this, "Do You Wany Update Yoour Record?");
        if (number1 == 0) {
            userDao.updateUser(user);
            fillUserTable();
        }
    }                                            

    private void deleteButtonActionPerformed(java.awt.event.ActionEvent evt) {                                             
        Integer id = (Integer) studentTable.getValueAt(studentTable.getSelectedRow(), 0);
        int number1 = JOptionPane.showConfirmDialog(this, "Do You Wany Delete Yoour Record?");
        if (number1 == 0) {
            userDao.deleteUser(id);
            fillUserTable();
        }
    }                                            

    private void rollComboActionPerformed(java.awt.event.ActionEvent evt) {                                          
        // TODO add your handling code here:
    }                                         

    private void homeButtonActionPerformed(java.awt.event.ActionEvent evt) {                                           
        HomeFrame frame = new HomeFrame();
        frame.setVisible(true);
        this.dispose();
    }                                          

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        /* Set the Nimbus look and feel */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
         * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(UserFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(UserFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(UserFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(UserFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>
        //</editor-fold>
        //</editor-fold>
        //</editor-fold>

        /* Create and display the form */
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                new UserFrame().setVisible(true);
            }
        });
    }

    // Variables declaration - do not modify                     
    private javax.swing.JButton UpdateButton;
    private javax.swing.JButton addButton;
    private javax.swing.JTextArea addressArea;
    private javax.swing.JButton clearButton;
    private javax.swing.JButton deleteButton;
    private javax.swing.JTextField emailText;
    private javax.swing.JButton homeButton;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JLabel jLabel4;
    private javax.swing.JLabel jLabel5;
    private javax.swing.JLabel jLabel6;
    private javax.swing.JLabel jLabel7;
    private javax.swing.JLabel jLabel8;
    private javax.swing.JLabel jLabel9;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JScrollPane jScrollPane2;
    private javax.swing.JTextField numberText;
    private javax.swing.JTextField passwordText;
    private javax.swing.JComboBox<String> rollCombo;
    private javax.swing.JTable studentTable;
    private javax.swing.JTextField usernameText;
    // End of variables declaration                   
}
